fn main() {
    // Prints 68
    print_int(build_mod().THE_CONSTANT)

    H :: build_mod().putchar("H" as i8 as i32)
}

fn build_mod(): module {
    b :: compiler.ModuleBuilder.new()

    b.add_usize_constant("THE_CONSTANT", 68)

    m :: compiler.ExternFunctionBuilder.new("putchar", i32, "libSystem.dylib")
    m.add_param("char", i32)
    b.add_extern_function(m)

    b.build()
}
